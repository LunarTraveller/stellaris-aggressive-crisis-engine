namespace = acemod_menu
country_event = {
	id = acemod_menu.0
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		# Commenting out to fix menu mods which support ACEMOD. This is now a redirect event menu mods can use.
		# NOT = {
		# 	has_global_flag = acemod_menu_fired
		# }
		is_ai = no
	}
	immediate = {
		set_global_flag = acemod_menu_fired
		country_event = {
			id = acemod_menu.1
		}
	}
}

country_event = {
	id = acemod_menu.1
	title = acemod_menu.1.name
	desc = acemod_menu.1.desc
	picture = GFX_evt_fallen_empire_awakes
	is_triggered_only = yes
	option = {
		name = acemod_menu.1.y
		custom_tooltip = acemod_menu.1.y.tooltip
		hidden_effect = {
			country_event = {
				id = acemod_crisis_manager.1				# Closes main menu window and redirects to Crisis Manager.
				days = 0
				random = 0
			}
		}
	}
	option = {
		name = acemod_menu.1.a
		custom_tooltip = acemod_menu.1.a.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_technology_disabled
					}
				}
				set_global_flag = acemod_technology_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_technology_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.b
		custom_tooltip = acemod_menu.1.b.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_crisis_debuff_disabled
					}
				}
				set_global_flag = acemod_crisis_debuff_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_crisis_debuff_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.c
		custom_tooltip = acemod_menu.1.c.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_fallen_awakened_empire_debuff_disabled
					}
				}
				set_global_flag = acemod_fallen_awakened_empire_debuff_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_fallen_awakened_empire_debuff_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.d
		custom_tooltip = acemod_menu.1.d.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_defensive_jumpdrive_protocol_disabled
					}
				}
				set_global_flag = acemod_defensive_jumpdrive_protocol_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_defensive_jumpdrive_protocol_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.e
		custom_tooltip = acemod_menu.1.e.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_constructor_reinforcements_disabled
					}
				}
				set_global_flag = acemod_constructor_reinforcements_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_constructor_reinforcements_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.f
		custom_tooltip = acemod_menu.1.f.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_crisis_colossus_disabled
					}
				}
				set_global_flag = acemod_crisis_colossus_disabled
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else_if = {
				limit = {
					host_has_dlc = Apocalypse					# Check for DLC presence to access this content is legally required.
				}
				# remove_global_flag = acemod_crisis_colossus_disabled				# Work in Progress.
				country_event = {
					id = acemod_menu.1
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				country_event = {
					id = acemod_menu.1					# Fails to flip flag if DLC is not present.
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.1.g
		custom_tooltip = acemod_menu.1.g.tooltip
		hidden_effect = {
			event_target:global_event_country = {
				# global_event country is always around
				if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier							# Default, use crisis strength.
							value = 0
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# OFF
						value = 101
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 101
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 1.25x
						value = 1.25
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 1.25
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 1.5x
						value = 1.5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 1.5
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 1.75x
						value = 1.75
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 1.75
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 2x
						value = 2
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 2
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 2.25x
						value = 2.25
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 2.25
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 2.5x
						value = 2.5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 2.5
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 2.75x
						value = 2.75
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 2.75
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 3x
						value = 3
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 3
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 3.25x
						value = 3.25
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 3.25
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 3.5x
						value = 3.5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 3.5
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 3.75x
						value = 3.75
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 3.75
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 4x
						value = 4
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 4
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 4.25x
						value = 4.25
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 4.25
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 4.5x
						value = 4.5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 4.5
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 4.75x
						value = 4.75
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 4.75
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 5x
						value = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 5
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 10x
						value = 10
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 10
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# 25x
						value = 25
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acemod_var_country_acemod_army_strength_modifier
							value = 25
						}
					}
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# Default, use crisis strength.
						value = 0
					}
				}
				else = {
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# Fallback to Default, use crisis strength.
						value = 0
					}
				}
				root = {
					set_variable = {
						which = acemod_var_country_acemod_army_strength_modifier						# Save to root country so that variables can be displayed via scripted_loc.
						value = prev
					}
					country_event = {
						id = acemod_menu.1
						days = 0
						random = 0
					}
				}
			}
		}
	}
	option = {
		name = acemod_menu.1.x
		custom_tooltip = acemod_menu.1.x.tooltip
		hidden_effect = {
			country_event = {
				id = acemod_menu.2				# Closes main menu window and redirects to Advanced Options.
				days = 0
				random = 0
			}
		}
	}
	option = {
		name = acemod_menu.1.z
	}
}

country_event = {
	id = acemod_menu.2
	title = acemod_menu.2.name
	desc = acemod_menu.2.desc
	picture = GFX_evt_guardians
	is_triggered_only = yes
	option = {
		name = acemod_menu.2.a
		custom_tooltip = acemod_menu.2.a.tooltip
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = acemod_advanced_ai_disabled
					}
				}
				set_global_flag = acemod_advanced_ai_disabled
				country_event = {
					id = acemod_menu.2
					days = 0
					random = 0
				}
				break = yes
			}
			else = {
				remove_global_flag = acemod_advanced_ai_disabled
				country_event = {
					id = acemod_menu.2
					days = 0
					random = 0
				}
				break = yes
			}
		}
	}
	option = {
		name = acemod_menu.2.z
		custom_tooltip = acemod_menu.2.z.tooltip
		hidden_effect = {
			country_event = {
				id = acemod_menu.1				# Closes Advanced Options window and redirects to main menu.
				days = 0
				random = 0
			}
		}
	}
}
